dist: bionic
language: java
jdk: openjdk11
before_install:
- sudo apt-get -y install libpng16-16 libwebkitgtk-1.0-0 zlib1g-dev libc6-dev libstdc++6
- sudo apt-get -y install python3-pip python3-dev
- DEBIAN_FRONTEND=noninteractive sudo apt-get -y install xorg xserver-xorg-video-dummy
- sudo -H pip3 install -U setuptools
- sudo -H pip3 install -U wheel
install:
- pip3 install gdown
- pip3 install mbpkg
script:
- "./travis.sh"
deploy:
  provider: releases
  api_key:
    secure: FxjPzG/ombEyRSEx3GlT5w03L52B9559nl89VY3RC4t3HLCD8q9ovZ48iyCRyya5AmhuRZCjB5Qtdqu25TMsd6r8ATJxi0njJP+cy7R1cVviGJgnijLlp37485kt2BuXwHX1B0PkJrRd5XZKcXprSogYyiclkOP1bDrD5Z617ZbUmrKcWvBYkZpdhPpAVYzHODRKdFy3SCvVLnEhSlj4xj+1Sr8HPC1JRvdNbsn07DFQ9L+lGC5uZp5reSv4kLmGf4nTuhr1g8U01+iqSprjXBzHxBm+MpHt1zjzj6ue+UCRBObiL+0JyOmGVRmN2NEGn5KTMhWt/sOOKQZHMakJj+0s7aEiLkB3sKFbX5+dz5nWuxmD0/2ARsUfLTTBYsgJbAyzIntk+V2dTlA2cMlDEGTaFwk5fe1PMhrFwjIi6yVXll1x6rBP+xCZHZXYQCzbu2TuPdTwzYtrvLrOdjL/25+eV8TwGePA/9IWI9+gMsuu/pOZ6/iWqXbm+Ii9R0q53yedg5gLn1CjzBaNmVyZEY1SGvDyY6JAawe/ahQfRVD2zuOdIvySc6xowb/dPWJzxgqCuN4pIQPSV4eATnrF/0p+AGd/ei+wApQkDFQ0jxCZ3wQjsfdWhUPQ2swpniZ1dWFKg3ntRG4UdQJ+LOsMwJtatLqyEClcnQHD5NiUKLs=
  file_glob: true
  file: "bin/*.barrel"
  skip_cleanup: true
  draft: true
  on:
    tags: true
after_deploy:
  - npm install -g github-release-notes
  - gren release --token ${GH_TOKEN} --tags $(git describe)
